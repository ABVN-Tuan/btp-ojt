sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,t){"use strict";return{createDeviceModel:function(){var o=new e(t);o.setDefaultBindingMode("OneWay");return o},_setModel:function(t,o,s){t.setModel(new e(o),s)},_getModel:function(e,t){let o=e.getModel(t);return o},setInitialModel:function(e){},setVisibleControl:function(e){const t={list:true,detail:false,create:false};this._setModel(e,t,"VisibleControl")},getListRole:async function(e){try{const t=await fetch("/ojt/Roles",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status==200){let o=await t.json();let s=o.value;this._setModel(e,s,"roleList");console.log(e.getModel("roleList"));return s}}catch(e){return null}},getRole:async function(e){try{const t=await fetch("/ojt/whoami",{method:"GET",headers:{"Content-Type":"application/json"}});console.log(t.status);if(t.status==200){console.log("abc");let o=await t.json();let s=o.value;this._setModel(e,{role:s},"role");console.log(s);return s}}catch(e){return null}},getListDepart:async function(e){try{const t=await fetch("/ojt/Departments",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status==200){let o=await t.json();let s=o.value;this._setModel(e,s,"departmentsList");console.log(e.getModel("departmentsList"));return s}}catch(e){return null}},getEmployees:async function(e){try{const t=await fetch("/ojt/Employees?$expand=role,department",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status==200){let o=await t.json();let s=o.value;this._setModel(e,s,"EmployeeList");return s}}catch(e){return null}},deleteEmployee:async function(e,t,o){try{const s=`/ojt/Employees(${o})`;console.log("🛰️ Gọi API DELETE tới URL:",s);const n=await fetch("/ojt/Employees('${sEmployeeId}')",{method:"DELETE",headers:{"Content-Type":"application/json"}});if(n.status===204){const s=this._getModel(e,t);const n=s.getData();if(Array.isArray(n.items)){const s=n.items.filter(e=>e.ID!==o);this._setModel(e,{items:s},t)}return true}else{console.error(`Delete failed with status ${n.status}`);return false}}catch(e){console.error("Error in deleteEmployee:",e);return false}}}});
//# sourceMappingURL=models.js.map