sap.ui.define(["sap/ui/core/mvc/Controller","./../model/models","./../model/formatter","sap/m/MessageBox","sap/m/MessageToast"],(e,t,s,o,i)=>{"use strict";return e.extend("project1.controller.homeView",{formatter:s,onInit:async function(){const e=this.getView();const s=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/ojt/",synchronizationMode:"None"});this.byId("itemTable").bindItems({path:"EntityList>/Employees",parameters:{$expand:"role,department"},template:new sap.m.ColumnListItem({type:"Active",press:this.onPressItem.bind(this),cells:[new sap.m.Text({text:"{EntityList>firstName},{EntityList>lastName}"}),new sap.m.Text({text:"{EntityList>role/name}"}),new sap.m.Text({text:"{EntityList>department/name}"}),new sap.m.Text({text:"{EntityList>email}"}),new sap.m.Button({id:"deleteButton",icon:"sap-icon://delete",type:"Transparent",press:this.onDeleteEmployee.bind(this),tooltip:"{i18n>deleteTooltip}",enabled:{parts:["role>/role"],formatter:this.formatter.isAdmin}})]})});e.setModel(s,"EntityList");await t.getRole(e);t.setInitialModel(e);await t.getListRole(e);await t.getListDepart(e);t.setVisibleControl(e);await t.getEmployees(e)},onPressItem:async function(e){const s=this.getView();const o=e.getSource();const i=o.getBindingContext("EntityList");try{const e=await i.requestObject();const t=new sap.ui.model.json.JSONModel(e);this.getView().setModel(t,"employDetail")}catch(e){}s.getModel("VisibleControl").setProperty("/",{list:false,detail:true,create:false});t._setModel(s,{isEdit:false},"Edit")},onPressBack:function(){const e=this.getView();e.getModel("VisibleControl").setProperty("/",{list:true,detail:false,create:false})},onPressEdit:function(){const e=this.getView();const t=e.getModel("Edit");const s=t.getProperty("/isEdit");t.setProperty("/isEdit",!s)},onPressCreEmp:function(){const e={firstName:"",lastName:"",email:"",hireDate:"",dateOfBirth:"",salary:0,gender:false,role:{ID:""},department:{ID:""}};const t=this.getView();t.setModel(new sap.ui.model.json.JSONModel(e),"createDetail");t.getModel("VisibleControl").setProperty("/",{list:false,detail:false,create:true})},onDeleteEmployee:function(e){const t=e.getSource().getParent();const s=t.getBindingContext("EntityList");if(!s){sap.m.MessageToast.show("No data found");return}sap.m.MessageBox.confirm("Are you sure to delete?",{onClose:async e=>{if(e===sap.m.MessageBox.Action.OK){try{if(typeof s.delete==="function"){await s.delete();sap.m.MessageToast.show("Delete success")}else{sap.m.MessageBox.error("Delete fail")}}catch(e){sap.m.MessageBox.error("Delete fail"+e.message)}}}})}})});
//# sourceMappingURL=homeView.controller.js.map